@{
    ViewBag.Title = "Báo cáo theo loài Động vật hoang dã";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Báo Cáo Theo Loại Động Vật Hoang Dã</h2>
<style id="styleDetail" type="text/css">
   /* Ban In css*/
    .tbBanIn {
        width:100%;
        border: 1px solid #bbbcbb;
        border-collapse: collapse;
    }
    .tbBanIn td, .tbBanIn th {
        border: 1px solid #bbbcbb;
        padding: 2px !important;
    }
    .tbBanIn label {
        margin: 0 !important;
    }
</style>
<script>
    document.addEventListener("keydown", autosearch);
    function autosearch(event) {
        var keyCode = ('which' in event) ? event.which : event.keyCode;
        //alert("The Unicode key code is: " + keyCode);
        if (keyCode == 13) {
            baocaotheoloai();
        }
        
    }
</script>

<div class="col-md-12">
    <div class="form-group">
        <label for="room" style="width:auto;display:block;">Loại Động Vật Hoang Dã</label>
        <input name="baocao_loaiDVHD" type="text" tabindex="1" id="baocao_loaiDVHD" value="" class="form-control" placeholder="Tên Loại Động Vật Hoang Dã" onkeyup="baocao_searchLoai();"/>
        <input type="button" value="Tìm kiếm" onclick="baocaotheoloai();">
    </div>
</div>

<div class="col-md-12" style="text-align:center;">
    <input id="btnCreateReportBanIn" type="button" value="Bản in" onclick="baocao_createPDFBanin();" disabled="disabled" />
    <input id="btnCreateReport" type="button" value="Xuất ra PDF file" onclick="baocao_createPDF();" disabled="disabled" />
</div>


<div id="divResult" class="col-md-12">
    <label id="countResult"></label>
    <table id="tbResult" class="tbBanIn"></table>
</div>

<script type="text/javascript">
    function baocao_createPDF() {
        $.ajax({
            url: '@Url.Action("createReport")',
            data: { html: $("#divResult").html(), type: 1 },
            type: 'POST',
            success: function (result) {
                //alert(result);
                window.open("/Images/Report/"+result);
            }
        });
    }
    function baocao_createPDFBanin() {
        var mywindow = window.open('', 'Thông Tin Chi Tiết', 'height=600,width=800');
        mywindow.document.write('<html><head><title>Thông Tin Chi Tiết</title>');
        mywindow.document.write('<style type="text/css">' + $("#styleDetail").html() + '</style>');
        mywindow.document.write('</head><body >');
        mywindow.document.write($("#divResult").html());
        mywindow.document.write('</body></html>');

        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10

        mywindow.print();
        mywindow.close();
    }
</script>
